<div class="container mx-0 mt-4 px-0 view" id="request">
    <div class="mx-4">
        <div class="d-flex justify-content-between align-items-center mb-3">
            <h5 class="green-text fw-bold mb-0">
                <i class="ph ph-arrow-left me-2"  onclick="goBackView()" style="cursor:pointer"></i>
                Add Notice
            </h5>

        </div>
        <br>
        <div id="current_requests"></div>

    </div>
    <form class="py-4" id="_form">

        <div class="p-3 px-4 border-bottom">
            <div class="text-green fw-semibold"> Category: </div>
            <select class="form-select border-0 px-0 bg-transparent" name="noticeCategory" required>

            </select>
        </div>

        <div class="p-3 px-4 border-bottom">
            <div class="text-green fw-semibold">Specify Users: </div>
            <select class="form-select border-0 px-0 bg-transparent" name="institution_user" required>
                <option value="">Select User</option>
                <option value="all">All Students</option>
                <option value="by-class">By Class</option>
                <option value="specific">Specific User</option>
            </select>
        </div>

        <div class="p-3 px-4 border-bottom class-students d-none">
            <div class="text-green fw-semibold"> Class Students: (Click here to select classes)</div>
            <select class="form-select border-0 px-0 bg-transparent" name="institution_class[]" multiple required>
                <option value="" disabled selected>Select Class(es)</option>
            </select>
        </div>

        <div class="p-3 px-4 border-bottom specific-user d-none">
            <div class="text-green fw-semibold">User Account Number: </div>
            <input type="text" value="" name="account_no" class="form-control border-0 px-0 bg-transparent mt-1" />
        </div>

        <div class="p-3 px-4 border-bottom">
            <div class="text-green fw-semibold"> Subject / Title: </div>
            <input type="text" name="subject" class="form-control border-0 px-0 bg-transparent mt-1" />
        </div>
        <div class="p-3 px-4 border-bottom">
            <div class="text-green fw-semibold"> Message: </div>
            <textarea type="text" name="message" class="form-control border-0 px-0 bg-transparent mt-1"></textarea>
        </div>
        <div class="p-3 px-4 border-bottom">
            <div class="text-green fw-semibold">Duration:</div>
            <select name="due_date" class="form-select border-0 px-0 bg-transparent">
                <option value="3">Show for 3 days</option>
                <option value="7" selected>Show for 7 days</option>
                <option value="14">Show for 14 days</option>
                <option value="30">Show for 30 days</option>
            </select>
        </div>

        <p id="form_result" class="small text-danger ps-2"></p>
        <div class="d-flex justify-content-center align-items-center mt-4">
            <button type="button" id="btn_submit_item" class="btn btn-success btn-lg rounded-2 px-4 shadow-sm">
                Submit Record
            </button>

        </div>
    </form>


</div>
<script>
    document.querySelector('[name="institution_user"]').addEventListener('change', function() {
        const selectedValue = this.value;
        const classStudents = document.querySelector('.class-students');
        const specificUser = document.querySelector('.specific-user');

        if (selectedValue === "by-class") {
            classStudents.classList.remove('d-none');
            specificUser.classList.add('d-none');
            // Call the revised function to fetch and populate classes
            get_classes();
        } else if (selectedValue === "specific") {
            specificUser.classList.remove('d-none');
            classStudents.classList.add('d-none');
        } else {
            classStudents.classList.add('d-none');
            specificUser.classList.add('d-none');
        }
    });
</script>
